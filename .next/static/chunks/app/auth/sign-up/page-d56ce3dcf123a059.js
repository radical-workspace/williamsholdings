(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[301],{7980:function(e,t,r){Promise.resolve().then(r.bind(r,9061))},9061:function(e,t,r){"use strict";r.d(t,{default:function(){return l}});var a=r(7437),s=r(2265),n=r(6463),i=r(6648),c=r(6474);function l(){let[e,t]=(0,s.useState)(""),[r,l]=(0,s.useState)(""),[o,u]=(0,s.useState)(null),[d,m]=(0,s.useState)(!1),h=(0,n.useRouter)(),p=(0,n.useSearchParams)().get("redirectedFrom")||"/dashboard";async function f(t){t.preventDefault(),u(null),m(!0);let a=(0,c.D)(),{data:s,error:n}=await a.auth.signUp({email:e,password:r});if(m(!1),n){u(n.message);return}let i=null==s?void 0:s.user;if(i)try{let t={id:i.id,user_id:i.id,email:e,first_name:null,last_name:null,role:"user",created_at:new Date().toISOString()},{error:r}=await a.from("profiles").insert(t).select();r&&!/duplicate|already exists/i.test(r.message||"")&&console.error("Failed to create profile:",r);try{let e="WH"+Math.random().toString().slice(2,10),{error:t}=await a.from("accounts").insert({user_id:i.id,account_number:e,available_balance:0,currency:"USD",status:"active"});t&&!/duplicate|already exists/i.test(t.message||"")&&console.error("Failed to create default account:",t)}catch(e){console.error("Account creation error:",e)}}catch(e){console.error("Profile creation error:",e)}h.push("/auth/pin-setup?redirectedFrom=".concat(encodeURIComponent(p)))}return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-sm space-y-4 card",children:[(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)(i.default,{src:"/logo.svg",alt:"WilliamsHoldings logo",width:40,height:40,className:"mx-auto"}),(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Create account"})]}),(0,a.jsxs)("form",{onSubmit:f,className:"space-y-3",children:[(0,a.jsx)("input",{className:"input",placeholder:"Email",value:e,onChange:e=>t(e.target.value),required:!0}),(0,a.jsx)("input",{className:"input",type:"password",placeholder:"Password",value:r,onChange:e=>l(e.target.value),required:!0}),o&&(0,a.jsx)("div",{className:"text-red-600 text-sm",children:o}),(0,a.jsx)("button",{className:"btn btn-primary w-full",disabled:d,children:d?"Creatingâ€¦":"Sign up"})]}),(0,a.jsxs)("div",{className:"text-sm text-slate-600 text-center",children:["Already have an account? ",(0,a.jsx)("a",{className:"underline",href:"/auth/sign-in?redirectedFrom=".concat(encodeURIComponent(p)),children:"Sign in"})]})]})})}},6474:function(e,t,r){"use strict";r.d(t,{D:function(){return i}});var a=r(9851),s=r(357);let n=null;function i(){var e,t;if(n)return n;let r=null!==(t=null!==(e=s.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY)&&void 0!==e?e:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNpaWhyb2dxdGlxaGJ3dW5xeGphIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxODIyMzgsImV4cCI6MjA3MDc1ODIzOH0.o4o1p3P0a0Kwnmj3TpUNmOtQb2J_p_bV1vhCksc-TKo")&&void 0!==t?t:"",i=e=>e.trim().replace(/^['"]+|['"]+$/g,""),c=i("https://ciihrogqtiqhbwunqxja.supabase.co"),l=i(r);if(!c||!l)throw Error("Supabase env vars missing.");return n=(0,a.createBrowserClient)(c,l)}}},function(e){e.O(0,[851,595,971,23,744],function(){return e(e.s=7980)}),_N_E=e.O()}]);