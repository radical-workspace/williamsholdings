(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[953],{1286:function(e,t,a){Promise.resolve().then(a.bind(a,4251))},4251:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return c}});var n=a(7437),s=a(2265),i=a(970);function c(){let[e,t]=(0,s.useState)("test@williamsholdings.com"),[a,c]=(0,s.useState)("password123"),[r,l]=(0,s.useState)("123456"),[o,u]=(0,s.useState)(""),[d,h]=(0,s.useState)(!1);async function p(){h(!0),u("Creating account...");try{let t=(0,i.D)(),{data:n,error:s}=await t.auth.signUp({email:e,password:a,options:{data:{first_name:"Test User"}}});s?u("Sign up error: ".concat(s.message)):u("✅ Account created! You can now sign in.")}catch(e){u("Error: ".concat(e))}finally{h(!1)}}async function m(){h(!0),u("Signing in...");try{let t=(0,i.D)(),{data:n,error:s}=await t.auth.signInWithPassword({email:e,password:a});if(s){u("Sign in error: ".concat(s.message)),h(!1);return}u("✅ Signed in! Waiting for session..."),await new Promise(e=>setTimeout(e,1e3)),u("Setting PIN..."),await f()}catch(e){u("Error: ".concat(e)),h(!1)}}async function f(){try{let e=await fetch("/api/pin/set",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pin:r}),credentials:"include"}),t=await e.json();if(!e.ok){u("PIN set error (".concat(e.status,"): ").concat(t.error||"Unknown error")),h(!1);return}u("✅ PIN set successfully! Now verifying..."),await g()}catch(e){u("PIN set error: ".concat(e)),h(!1)}}async function g(){try{let e=await fetch("/api/pin/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pin:r}),credentials:"include"}),t=await e.json();if(!e.ok){u("PIN verify error (".concat(e.status,"): ").concat(t.error||"Unknown error")),h(!1);return}u("✅ All authentication steps completed! You can now go to dashboard."),h(!1)}catch(e){u("PIN verify error: ".concat(e)),h(!1)}}return(0,n.jsxs)("div",{className:"p-4 space-y-4 max-w-md mx-auto",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"Quick Test Setup"}),(0,n.jsxs)("div",{className:"card space-y-3",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold",children:"Test Credentials"}),(0,n.jsx)("input",{className:"input",placeholder:"Email",value:e,onChange:e=>t(e.target.value)}),(0,n.jsx)("input",{className:"input",type:"password",placeholder:"Password",value:a,onChange:e=>c(e.target.value)}),(0,n.jsx)("input",{className:"input",placeholder:"PIN (6 digits)",value:r,onChange:e=>l(e.target.value.replace(/\D/g,"").slice(0,6))})]}),(0,n.jsxs)("div",{className:"card space-y-3",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold",children:"Quick Setup"}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("button",{onClick:p,disabled:d,className:"btn btn-primary w-full",children:"1. Create Test Account"}),(0,n.jsx)("button",{onClick:m,disabled:d,className:"btn btn-ghost w-full",children:"2. Sign In & Set PIN"})]})]}),o&&(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Status"}),(0,n.jsx)("p",{className:"text-sm",children:o})]}),(0,n.jsxs)("div",{className:"card",children:[(0,n.jsx)("h3",{className:"font-semibold mb-2",children:"Manual Steps"}),(0,n.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,n.jsx)("a",{href:"/auth/sign-up",className:"block text-blue-600 underline",children:"→ Go to Sign Up Page"}),(0,n.jsx)("a",{href:"/auth/sign-in",className:"block text-blue-600 underline",children:"→ Go to Sign In Page"}),(0,n.jsx)("a",{href:"/auth/pin-setup-client",className:"block text-green-600 underline font-semibold",children:"→ Client-Side PIN Setup (Bypass API Issues)"}),(0,n.jsx)("a",{href:"/auth/pin-client",className:"block text-green-600 underline",children:"→ Client-Side PIN Verify"}),(0,n.jsx)("a",{href:"/auth/debug",className:"block text-blue-600 underline",children:"→ Back to Debug Page"}),(0,n.jsx)("a",{href:"/dashboard",className:"block text-blue-600 underline",children:"→ Try Dashboard"})]})]})]})}},970:function(e,t,a){"use strict";a.d(t,{D:function(){return c}});var n=a(1388),s=a(257);let i=null;function c(){var e,t;if(i)return i;let a=null!==(t=null!==(e=s.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY)&&void 0!==e?e:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNpaWhyb2dxdGlxaGJ3dW5xeGphIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxODIyMzgsImV4cCI6MjA3MDc1ODIzOH0.o4o1p3P0a0Kwnmj3TpUNmOtQb2J_p_bV1vhCksc-TKo")&&void 0!==t?t:"",c=e=>e.trim().replace(/^['"]+|['"]+$/g,""),r=c("https://ciihrogqtiqhbwunqxja.supabase.co"),l=c(a);if(!r||!l)throw Error("Supabase env vars missing.");return i=(0,n.createBrowserClient)(r,l)}}},function(e){e.O(0,[388,971,117,744],function(){return e(e.s=1286)}),_N_E=e.O()}]);