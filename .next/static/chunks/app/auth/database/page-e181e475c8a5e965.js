(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[627],{9131:function(e,a,t){Promise.resolve().then(t.bind(t,8488))},8488:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return r}});var s=t(7437),n=t(2265),c=t(6474);function i(e){let{message:a,open:t}=e;return t&&a?(0,s.jsx)("div",{"aria-live":"polite",className:"fixed top-4 right-4 z-50",children:(0,s.jsx)("div",{className:"bg-black text-white px-4 py-2 rounded shadow",children:a})}):null}function r(){let[e,a]=(0,n.useState)(""),[t,r]=(0,n.useState)(!1),[l,o]=(0,n.useState)(!1),[u,d]=(0,n.useState)(!1),[E,p]=(0,n.useState)(!1),[b,h]=(0,n.useState)(null);async function m(){r(!0),a("Checking database tables...");try{let e=(0,c.D)(),{data:t,error:s}=await e.from("profiles").select("count",{count:"exact"}).limit(1);if(s){a("❌ Profiles table error: ".concat(s.message," — showing SQL to help you create the table.")),h("profiles"),o(!0),r(!1);return}let{data:n,error:i}=await e.from("accounts").select("count",{count:"exact"}).limit(1);if(i){a("❌ Accounts table error: ".concat(i.message," — showing SQL to help you create the table.")),h("accounts"),o(!0),r(!1);return}a("✅ Database tables exist and are accessible!")}catch(e){a("❌ Database connection error: ".concat(e))}finally{r(!1)}}let T='-- profiles table for WilliamsHoldings\nCREATE TABLE IF NOT EXISTS public.profiles (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,\n  first_name TEXT,\n  last_name TEXT,\n  pin_hash TEXT,\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  UNIQUE(user_id)\n);\n\n-- Enable RLS on profiles\nALTER TABLE public.profiles ENABLE ROW LEVEL SECURITY;\n\n-- Create policies for profiles\nCREATE POLICY "Users can manage own profile" ON public.profiles\n  FOR ALL USING (auth.uid() = user_id);\n',x="-- accounts table for WilliamsHoldings\nCREATE TABLE IF NOT EXISTS public.accounts (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,\n  account_number TEXT UNIQUE NOT NULL,\n  available_balance DECIMAL(15,2) DEFAULT 0.00,\n  currency TEXT DEFAULT 'USD',\n  account_type TEXT DEFAULT 'checking',\n  status TEXT DEFAULT 'active',\n  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n  UNIQUE(user_id)\n);\n\n-- Enable RLS on accounts\nALTER TABLE public.accounts ENABLE ROW LEVEL SECURITY;\n\n-- Create policies for accounts\nCREATE POLICY \"Users can manage own account\" ON public.accounts\n  FOR ALL USING (auth.uid() = user_id);\n",N="".concat(T,"\n").concat(x);return(0,n.useEffect)(()=>{if(!u)return;let e=setTimeout(()=>d(!1),2e3);return()=>clearTimeout(e)},[u]),(0,s.jsxs)("div",{className:"p-4 space-y-4 max-w-2xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Database Setup"}),(0,s.jsxs)("div",{className:"card space-y-3",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Database Status"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("button",{onClick:m,disabled:t,className:"btn btn-primary",children:"Check Database Tables"}),(0,s.jsx)("button",{onClick:()=>o(e=>!e),disabled:t,className:"btn btn-ghost","aria-controls":"creation-sql",children:l?"Hide Table Creation SQL":"Show Table Creation SQL"})]}),e&&(0,s.jsx)("div",{className:"bg-slate-100 p-3 rounded text-sm whitespace-pre-wrap",children:e})]}),l&&(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Table Creation SQL"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("pre",{id:"creation-sql",className:"p-4 bg-black text-white rounded overflow-auto text-xs whitespace-pre",tabIndex:0,children:"profiles"===b?T:"accounts"===b?x:N}),(0,s.jsxs)("div",{className:"absolute right-2 top-2 flex items-center space-x-2",children:[(0,s.jsx)("button",{onClick:async()=>{try{let e="profiles"===b?T:"accounts"===b?x:N;await navigator.clipboard.writeText(e),d(!0),p(!0)}catch(e){console.error("Copy failed",e),d(!1)}},className:"bg-blue-600 text-white px-3 py-1 rounded text-sm","aria-label":"Copy SQL to clipboard",children:"Copy"}),(0,s.jsx)("span",{"aria-live":"polite",className:"sr-only",children:u?"SQL copied to clipboard":""}),u&&(0,s.jsx)("span",{className:"text-green-400 text-sm",children:"Copied!"})]})]})]}),(0,s.jsx)(i,{message:u?"SQL copied to clipboard":"",open:E}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Quick Links"}),(0,s.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,s.jsx)("a",{href:"/auth/complete",className:"block text-green-600 underline font-semibold",children:"→ Complete Auth Flow (Recommended)"}),(0,s.jsx)("a",{href:"/auth/debug",className:"block text-blue-600 underline",children:"→ Debug Page"}),(0,s.jsx)("a",{href:"https://supabase.com/dashboard",target:"_blank",rel:"noopener noreferrer",className:"block text-purple-600 underline",children:"→ Supabase Dashboard"})]})]})]})}},6474:function(e,a,t){"use strict";t.d(a,{D:function(){return i}});var s=t(9851),n=t(357);let c=null;function i(){var e,a;if(c)return c;let t=null!==(a=null!==(e=n.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY)&&void 0!==e?e:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNpaWhyb2dxdGlxaGJ3dW5xeGphIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxODIyMzgsImV4cCI6MjA3MDc1ODIzOH0.o4o1p3P0a0Kwnmj3TpUNmOtQb2J_p_bV1vhCksc-TKo")&&void 0!==a?a:"",i=e=>e.trim().replace(/^['"]+|['"]+$/g,""),r=i("https://ciihrogqtiqhbwunqxja.supabase.co"),l=i(t);if(!r||!l)throw Error("Supabase env vars missing.");return c=(0,s.createBrowserClient)(r,l)}}},function(e){e.O(0,[851,971,23,744],function(){return e(e.s=9131)}),_N_E=e.O()}]);