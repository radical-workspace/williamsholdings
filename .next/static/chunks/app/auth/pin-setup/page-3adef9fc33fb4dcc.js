(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[96],{6111:function(e,t,n){Promise.resolve().then(n.bind(n,4845))},4845:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var a=n(7437),r=n(2265),s=n(6463);function i(){let[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)(""),[u,o]=(0,r.useState)(null),[c,l]=(0,r.useState)(!1),d=(0,s.useRouter)(),h=(0,s.useSearchParams)().get("redirectedFrom")||"/dashboard";async function m(t){if(t.preventDefault(),o(null),e!==n){o("PINs do not match");return}l(!0);let a=await fetch("/api/pin/set",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pin:e})}),r=await a.json();if(!a.ok){l(!1),o(r.error||"Failed to set PIN");return}if(a=await fetch("/api/pin/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pin:e})}),r=await a.json(),l(!1),!a.ok){o(r.error||"Failed to verify");return}d.push(h)}return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-sm space-y-4 card",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold text-center",children:"Set your PIN"}),(0,a.jsxs)("form",{onSubmit:m,className:"space-y-3",children:[(0,a.jsx)("input",{className:"input",inputMode:"numeric",maxLength:6,value:e,onChange:e=>t(e.target.value.replace(/\D/g,"")),placeholder:"6-digit PIN",required:!0}),(0,a.jsx)("input",{className:"input",inputMode:"numeric",maxLength:6,value:n,onChange:e=>i(e.target.value.replace(/\D/g,"")),placeholder:"Confirm PIN",required:!0}),u&&(0,a.jsx)("div",{className:"text-red-600 text-sm",children:u}),(0,a.jsx)("button",{className:"btn btn-primary w-full",disabled:c,children:c?"Savingâ€¦":"Save PIN"})]})]})})}},6463:function(e,t,n){"use strict";var a=n(1169);n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=6111)}),_N_E=e.O()}]);