(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{1588:function(e,t,s){Promise.resolve().then(s.bind(s,9711))},9711:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(7437),n=s(2265),r=s(9376),i=s(970);function c(e){let{children:t}=e,s=(0,r.useRouter)(),c=(0,r.usePathname)(),{checking:u}=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=(0,r.useRouter)(),[s,a]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{let s=!0;return async function(){try{let{data:{user:s}}=await (0,i.D)().auth.getUser();!s&&e&&t.push("/admin/login")}catch(s){e&&t.push("/admin/login")}finally{s&&a(!1)}}(),()=>{s=!1}},[e,t]),{checking:s}}(!0);async function o(){try{try{await fetch("/api/admin/logout",{method:"POST"})}catch(e){console.warn("Server logout failed, falling back to client signOut",e)}await (0,i.D)().auth.signOut()}catch(e){console.error("Logout error",e)}s.push("/admin/login")}return c&&c.includes("/admin/login")?(0,a.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,a.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:t})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"WilliamsHoldings Admin"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("nav",{className:"flex space-x-4",children:[(0,a.jsx)("a",{href:"/admin/dashboard",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Dashboard"}),(0,a.jsx)("a",{href:"/admin/users",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Users"}),(0,a.jsx)("a",{href:"/admin/accounts",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Accounts"}),(0,a.jsx)("a",{href:"/admin/transactions",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Transactions"}),(0,a.jsx)("a",{href:"/admin/settings",className:"text-gray-600 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium",children:"Settings"})]}),(0,a.jsx)("button",{onClick:o,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm font-medium",children:"Logout"})]})]})})}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:t})]})}},970:function(e,t,s){"use strict";s.d(t,{D:function(){return i}});var a=s(1388),n=s(257);let r=null;function i(){var e,t;if(r)return r;let s=null!==(t=null!==(e=n.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY)&&void 0!==e?e:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNpaWhyb2dxdGlxaGJ3dW5xeGphIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxODIyMzgsImV4cCI6MjA3MDc1ODIzOH0.o4o1p3P0a0Kwnmj3TpUNmOtQb2J_p_bV1vhCksc-TKo")&&void 0!==t?t:"",i=e=>e.trim().replace(/^['"]+|['"]+$/g,""),c=i("https://ciihrogqtiqhbwunqxja.supabase.co"),u=i(s);if(!c||!u)throw Error("Supabase env vars missing.");return r=(0,a.createBrowserClient)(c,u)}},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[388,971,117,744],function(){return e(e.s=1588)}),_N_E=e.O()}]);